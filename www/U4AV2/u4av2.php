<?php

$pomodoroHaters = [
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', 'A', '0', 'A', '0', '0', 'A', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '0', 'A', '0', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'A', 'A', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'A', '0', '0', 'A', 'A', 'A', '0', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '0', '0', '0', 'A', '0', 'A', 'A', '0', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', 'A', '0', '0', '~'],
    ['~', '~', '~', '~', '~', '~', '0', '0', 'A', '0', '0', '0', 'A', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '~'],
    ['~', '~', '~', '~', '~', '0', '0', 'A', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '~', '~', '~'],
    ['~', '~', '~', '0', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~'],
    ['~', '0', '0', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', 'A', '0', '0', '0', '0', '0', 'A', '0', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', '0', 'A', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', 'A', 'A', 'A', '0', '0', 'A', '0', '0', '0', '~', '~', '~'],
    ['~', '~', '~', '~', '0', 'A', 'A', '0', '0', 'A', '0', '0', '0', 'A', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '0', 'A', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', 'A', '0', '0', '0', '0', '0', 'A', '0', 'A', '0', '0', '0', '~'],
    ['~', '~', '~', '0', 'A', '0', '0', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '0', '0', '0', 'A', '0', '0', 'A', '0', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '0', '0', '0', '0', 'A', '0', '0', '0', '0', 'A', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '0', '0', '0', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '0', '0', '0', '0', '0', 'A', '0', '0', '0', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~'],
    ['~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~', '~']
];
$impacts = [
    [20, 4],
    [2, 13],
    [13, 12],
    [3, 17],
    [2, 13],
    [5, 19],
    [6, 18],
    [5, 2],
    [20, 13],
    [9, 7],
    [5, 9],
    [15, 16],
    [16, 13],
    [16, 9],
    [16, 0],
    [3, 19],
    [19, 8],
    [1, 16],
    [18, 4],
    [21, 23],
    [7, 17],
    [22, 15],
    [21, 6],
    [14, 8],
    [12, 23],
    [7, 7],
    [22, 4],
    [3, 21],
    [2, 3],
    [8, 11],
    [0, 4],
    [7, 21],
    [11, 4],
    [7, 15],
    [6, 17],
    [5, 19],
    [4, 19],
    [4, 7],
    [23, 21],
    [15, 20],
    [2, 9],
    [21, 2],
    [1, 13],
    [7, 10],
    [21, 5],
    [13, 17],
    [2, 14],
    [11, 14],
    [22, 17],
    [18, 22],
    [2, 23],
    [3, 1],
    [18, 6],
    [17, 12],
    [18, 18],
    [20, 2],
    [3, 14],
    [11, 21],
    [6, 5],
    [6, 2],
    [12, 23],
    [18, 18],
    [21, 6],
    [10, 12],
    [5, 4],
    [16, 19],
    [8, 10],
    [12, 21],
    [15, 1],
    [20, 14],
    [3, 20],
    [6, 19],
    [20, 13],
    [15, 4],
    [10, 2],
    [5, 16],
    [20, 1],
    [12, 13],
    [11, 5],
    [12, 14],
    [8, 3],
    [6, 8],
    [19, 7],
    [16, 9],
    [13, 20],
    [3, 5],
    [1, 0],
    [20, 14],
    [12, 21],
    [12, 16],
    [15, 7],
    [9, 1],
    [1, 18],
    [20, 6],
    [8, 6],
    [22, 1],
    [10, 22],
    [19, 19],
    [7, 16],
    [8, 8]
];

$largo = 24;
$alto = 24;
$colirio = 25;
$litrosColirio = 0;
$personasAfectadas = 0;
$numeroImapctos = count ($impacts);
$noHabitado = 0;
$habitado = 0;
$marTotal = 0;
$dañosTotal = 0;
$afectadoMar = 0;
$toneladas = 0;
$precioBacalao = 0;

for ($i=0; $i<$largo; $i++){
    for ($j=0; $j<$alto; $j++){
        echo $pomodoroHaters[$i][$j], "  "; //mapa de la isla
        if ($pomodoroHaters[$i][$j] == "A"){ 
            $litrosColirio += 5000 * $colirio; //personas afectadas y litros de colirio ANTES del mapa con C's
            $personasAfectadas += 5000;
        }elseif ($pomodoroHaters[$i][$j] == "~"){
            $marTotal++;
        }
    }
    echo "<br>";
}
echo "COLIRIO ANTES DE CAMBIAR EL MAPA <br>";
echo "Necesitamos: ", $litrosColirio/1000, " l. de colirio para las ", $personasAfectadas, " personas afectadas.";
echo "<br>";

//Impactos en zonas urbanas
for ($i=0; $i<$numeroImapctos; $i++){
    $x = $impacts[$i][0];
    $y = $impacts[$i][1];

    if (($pomodoroHaters[$x][$y]) == "A"){
        array_splice($pomodoroHaters[$x],$y, 1, "C");
    }elseif ($pomodoroHaters[$x][$y] == "~"){
        $afectadoMar++;
        $pomodoroHaters[$x][$y] = "S";
    }
}


//Dibujamos el mapa con impactos en zonas urbanas
for ($i=0; $i<$largo; $i++){
    for ($j=0; $j<$alto; $j++){
        echo $pomodoroHaters[$i][$j], "  "; //mapa de la isla
    }
    echo "<br>";    
}

$litrosColirio = 0;
$personasAfectadas = 0;
for ($i=0; $i<$largo; $i++){
    for ($j=0; $j<$alto; $j++){
        if ($pomodoroHaters[$i][$j] == "C"){ 
            $litrosColirio += 5000 * $colirio; //personas afectadas y litros de colirio DESPUÉS del mapa con C's
            $personasAfectadas += 5000;
        }
    }
}
echo "COLIRIO DESPUÉS DE CAMBIAR EL MAPA <br>";
echo "Necesitamos: ", $litrosColirio/1000, " l. de colirio para las ", $personasAfectadas, " personas afectadas.";
echo "<br>";

//Agentes de Seguros
//Cambiamos el mapa con impactos en territorio no habitado y mar

for ($i=0; $i<$numeroImapctos; $i++){
    $x = $impacts[$i][0];
    $y = $impacts[$i][1];

    if (($pomodoroHaters[$x][$y]) == "0"){
        array_splice($pomodoroHaters[$x],$y, 1, "X");
    }
}


//Lo dibujamos
echo "MAPA PARA LOS AGENTES DE SEGUROS <br>";
for ($i=0; $i<$largo; $i++){
    for ($j=0; $j<$alto; $j++){
        echo $pomodoroHaters[$i][$j], "  "; //mapa de la isla
    }
    echo "<br>";    
}

//Daños total
for ($i=0; $i<$largo; $i++){
    for ($j=0; $j<$alto; $j++){
        if ($pomodoroHaters[$i][$j] == "X"){
            $noHabitado++;
        }elseif ($pomodoroHaters[$i][$j] == "C"){
            $habitado++;
        }
    }
}

echo "$marTotal de mar total <br> $afectadoMar de mar afectado <br>";
$toneladas = 2000/$marTotal*$afectadoMar; //calculo las toneladas de bakalao que hay en el mar afectado.
$precioBacalao = $toneladas*5000;
$noHabitado*=50000;
$habitado*=200000;

$dañosTotal = $noHabitado + $habitado;
echo "Los daños totales son: $noHabitado € en zona no habitada + $habitado € en zona habitada <br>";
echo "El total de daños es: $dañosTotal <br>";
echo "La ONG recaudará un total de $precioBacalao € por las $toneladas toneladas de Bakalao con tomate"



    
?>